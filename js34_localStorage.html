<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>로컬스토리지</title>
</head>
<body>
  <input type="text" id="입력값">
  <button id="저장">저장하기</button>
  <button id="추가">더 넣기</button>
  <script>
    //무언가 값을 저장하고 싶다면 "변수"
    // 변수는 새로고침하면 없어짐
    var variable = "저장하고 싶은 글자";

    //페이지를 새로고침하거나 새로고침해도
    //웹에서 제공하는 localStorage
    localStorage.setItem('이름',"몰라")
    variable = localStorage.getItem("이름")
    console.log(variable)

    localStorage.setItem('키',"170.0")
    localStorage.removeItem('키')

    document.getElementById("저장").addEventListener("click",function(){
      let input_val = document.getElementById('입력값').value
      //input에 입력된 값을 변수로 받아서
      //setItem의 값에 대입
      localStorage.setItem('name',input_val)
      alert("이름이"+input_val+"으로 바뀜")
      document.getElementById('입력값').value="";
      //JSON문자열 :웹에서 배열이나 객체를 쓰기 위한 문자열 형식 
      //배열, 객체 => JSON으로 바꿔서 웹에 적용
      //배열(객체) => JSON문자열
      
      
      
    })
    variable=[1,2,3]
    JSON.stringify(variable)//배열(객체)를 웹에서 쓰기위해 바꿈
    var json_string ='{}'
    JSON.parse(json_string)//JSON문자열 => 배열(객체) (자바스크립트 변수로 쓰기 위함)

    document.getElementById('추가').addEventListener("click", () => {
      let temp_val = variable
      temp_val =localStorage.getItem('저장한 값'); // 저장된 값 가져오기

      
      temp_val = JSON.parse(temp_val);
      

      // 배열에 새로운 값을 추가
      const last_num = temp_val[temp_val.length - 1]; // 마지막 숫자 가져오기
      temp_val.push(last_num + 1);

      // 배열을 다시 JSON 문자열로 변환하여 로컬 스토리지에 저장
      localStorage.setItem("저장한 값", JSON.stringify(temp_val));

      alert("값이 추가되었습니다. 현재 배열: " + JSON.stringify(temp_val));
    });

  </script>
</body>
</html>